!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).adhan={})}(this,(function(t){"use strict";function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o={Shafi:"shafi",Hanafi:"hanafi"};var h={MiddleOfTheNight:"middleofthenight",SeventhOfTheNight:"seventhofthenight",TwilightAngle:"twilightangle",recommended:function(t){return t.latitude>48?h.SeventhOfTheNight:h.MiddleOfTheNight}},u=i((function t(e,n){r(this,t),this.latitude=e,this.longitude=n})),l={Nearest:"nearest",Up:"up",None:"none"};function d(t,e){var n=t.getFullYear(),r=t.getMonth(),a=t.getDate()+e,i=t.getHours(),s=t.getMinutes(),o=t.getSeconds();return new Date(n,r,a,i,s,o)}function c(t,e){return g(t,60*e)}function g(t,e){return new Date(t.getTime()+1e3*e)}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.Nearest,n=t.getUTCSeconds(),r=n>=30?60-n:-1*n;return e===l.Up?r=60-n:e===l.None&&(r=0),g(t,r)}function m(t){for(var e=0,n=[31,j.isLeapYear(t.getFullYear())?29:28,31,30,31,30,31,31,30,31,30,31],r=0;r<t.getMonth();r++)e+=n[r];return e+=t.getDate()}function M(t){return t instanceof Date&&!isNaN(t.valueOf())}function v(t){return t*Math.PI/180}function p(t){return 180*t/Math.PI}function b(t,e){return t-e*Math.floor(t/e)}function w(t){return b(t,360)}var A={General:"general",Ahmer:"ahmer",Abyad:"abyad"},j={meanSolarLongitude:function(t){var e=t;return w(280.4664567+36000.76983*e+3032e-7*Math.pow(e,2))},meanLunarLongitude:function(t){return w(218.3165+481267.8813*t)},ascendingLunarNodeLongitude:function(t){var e=t;return w(125.04452-1934.136261*e+.0020708*Math.pow(e,2)+Math.pow(e,3)/45e4)},meanSolarAnomaly:function(t){var e=t;return w(357.52911+35999.05029*e-1537e-7*Math.pow(e,2))},solarEquationOfTheCenter:function(t,e){var n=t,r=v(e);return(1.914602-.004817*n-14e-6*Math.pow(n,2))*Math.sin(r)+(.019993-101e-6*n)*Math.sin(2*r)+289e-6*Math.sin(3*r)},apparentSolarLongitude:function(t,e){var n=t,r=125.04-1934.136*n;return w(e+j.solarEquationOfTheCenter(n,j.meanSolarAnomaly(n))-.00569-.00478*Math.sin(v(r)))},meanObliquityOfTheEcliptic:function(t){var e=t;return 23.439291-.013004167*e-1.639e-7*Math.pow(e,2)+5.036e-7*Math.pow(e,3)},apparentObliquityOfTheEcliptic:function(t,e){var n=125.04-1934.136*t;return e+.00256*Math.cos(v(n))},meanSiderealTime:function(t){var e=t;return w(280.46061837+360.98564736629*(36525*e+2451545-2451545)+387933e-9*Math.pow(e,2)-Math.pow(e,3)/3871e4)},nutationInLongitude:function(t,e,n,r){var a=e,i=n,s=r;return-17.2/3600*Math.sin(v(s))-1.32/3600*Math.sin(2*v(a))-.23/3600*Math.sin(2*v(i))+.21/3600*Math.sin(2*v(s))},nutationInObliquity:function(t,e,n,r){var a=e,i=n,s=r;return 9.2/3600*Math.cos(v(s))+.57/3600*Math.cos(2*v(a))+.1/3600*Math.cos(2*v(i))-.09/3600*Math.cos(2*v(s))},altitudeOfCelestialBody:function(t,e,n){var r=t,a=e,i=n,s=Math.sin(v(r))*Math.sin(v(a)),o=Math.cos(v(r))*Math.cos(v(a))*Math.cos(v(i));return p(Math.asin(s+o))},approximateTransit:function(t,e,n){return b((n+-1*t-e)/360,1)},correctedTransit:function(t,e,n,r,a,i){var s,o=t,h=r,u=a,l=i,d=-1*e,c=w(n+360.985647*o),g=w(j.interpolateAngles(h,u,l,o));return 24*(o+((s=c-d-g)>=-180&&s<=180?s:s-360*Math.round(s/360))/-360)},correctedHourAngle:function(t,e,n,r,a,i,s,o,h,u,l){var d=t,c=e,g=a,f=i,m=s,M=o,b=h,A=u,y=l,T=-1*n.longitude,S=Math.sin(v(c))-Math.sin(v(n.latitude))*Math.sin(v(b)),O=Math.cos(v(n.latitude))*Math.cos(v(b)),D=p(Math.acos(S/O)),N=r?d+D/360:d-D/360,P=w(g+360.985647*N),L=w(j.interpolateAngles(f,m,M,N)),C=j.interpolate(b,A,y,N),Y=P-T-L;return 24*(N+(j.altitudeOfCelestialBody(n.latitude,C,Y)-c)/(360*Math.cos(v(C))*Math.cos(v(n.latitude))*Math.sin(v(Y))))},interpolate:function(t,e,n,r){var a=t-e,i=n-t;return t+r/2*(a+i+r*(i-a))},interpolateAngles:function(t,e,n,r){var a=w(t-e),i=w(n-t);return t+r/2*(a+i+r*(i-a))},julianDay:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Math.trunc,i=a(e>2?t:t-1),s=a(e>2?e:e+12),o=n+r/24,h=a(i/100),u=a(2-h+a(h/4)),l=a(365.25*(i+4716)),d=a(30.6001*(s+1));return l+d+o+u-1524.5},julianCentury:function(t){return(t-2451545)/36525},isLeapYear:function(t){return t%4==0&&(t%100!=0||t%400==0)},seasonAdjustedMorningTwilight:function(t,e,n,r){var a,i=75+28.65/55*Math.abs(t),s=75+19.44/55*Math.abs(t),o=75+32.74/55*Math.abs(t),h=75+48.1/55*Math.abs(t),u=(a=j.daysSinceSolstice(e,n,t))<91?i+(s-i)/91*a:a<137?s+(o-s)/46*(a-91):a<183?o+(h-o)/46*(a-137):a<229?h+(o-h)/46*(a-183):a<275?o+(s-o)/46*(a-229):s+(i-s)/91*(a-275);return g(r,Math.round(-60*u))},seasonAdjustedEveningTwilight:function(t,e,n,r,a){var i,s,o,h;a===A.Ahmer?(i=62+17.4/55*Math.abs(t),s=62-7.16/55*Math.abs(t),o=62+5.12/55*Math.abs(t),h=62+19.44/55*Math.abs(t)):a===A.Abyad?(i=75+25.6/55*Math.abs(t),s=75+7.16/55*Math.abs(t),o=75+36.84/55*Math.abs(t),h=75+1.488*Math.abs(t)):(i=75+25.6/55*Math.abs(t),s=75+2.05/55*Math.abs(t),o=75-9.21/55*Math.abs(t),h=75+6.14/55*Math.abs(t));var u,l=(u=j.daysSinceSolstice(e,n,t))<91?i+(s-i)/91*u:u<137?s+(o-s)/46*(u-91):u<183?o+(h-o)/46*(u-137):u<229?h+(o-h)/46*(u-183):u<275?o+(s-o)/46*(u-229):s+(i-s)/91*(u-275);return g(r,Math.round(60*l))},daysSinceSolstice:function(t,e,n){var r=0,a=j.isLeapYear(e)?173:172,i=j.isLeapYear(e)?366:365;return n>=0?(r=t+10,r>=i&&(r-=i)):(r=t-a,r<0&&(r+=i)),r}},y=i((function t(e){r(this,t);var n=j.julianCentury(e),a=j.meanSolarLongitude(n),i=j.meanLunarLongitude(n),s=j.ascendingLunarNodeLongitude(n),o=v(j.apparentSolarLongitude(n,a)),h=j.meanSiderealTime(n),u=j.nutationInLongitude(n,a,i,s),l=j.nutationInObliquity(n,a,i,s),d=j.meanObliquityOfTheEcliptic(n),c=v(j.apparentObliquityOfTheEcliptic(n,d));this.declination=p(Math.asin(Math.sin(c)*Math.sin(o))),this.rightAscension=w(p(Math.atan2(Math.cos(c)*Math.sin(o),Math.cos(o)))),this.apparentSiderealTime=h+3600*u*Math.cos(v(d+l))/3600})),T=function(){function t(e,n){r(this,t);var a=j.julianDay(e.getFullYear(),e.getMonth()+1,e.getDate(),0);this.observer=n,this.solar=new y(a),this.prevSolar=new y(a-1),this.nextSolar=new y(a+1);var i=j.approximateTransit(n.longitude,this.solar.apparentSiderealTime,this.solar.rightAscension),s=-50/60;this.approxTransit=i,this.transit=j.correctedTransit(i,n.longitude,this.solar.apparentSiderealTime,this.solar.rightAscension,this.prevSolar.rightAscension,this.nextSolar.rightAscension),this.sunrise=j.correctedHourAngle(i,s,n,!1,this.solar.apparentSiderealTime,this.solar.rightAscension,this.prevSolar.rightAscension,this.nextSolar.rightAscension,this.solar.declination,this.prevSolar.declination,this.nextSolar.declination),this.sunset=j.correctedHourAngle(i,s,n,!0,this.solar.apparentSiderealTime,this.solar.rightAscension,this.prevSolar.rightAscension,this.nextSolar.rightAscension,this.solar.declination,this.prevSolar.declination,this.nextSolar.declination)}return i(t,[{key:"hourAngle",value:function(t,e){return j.correctedHourAngle(this.approxTransit,t,this.observer,e,this.solar.apparentSiderealTime,this.solar.rightAscension,this.prevSolar.rightAscension,this.nextSolar.rightAscension,this.solar.declination,this.prevSolar.declination,this.nextSolar.declination)}},{key:"afternoon",value:function(t){var e=Math.abs(this.observer.latitude-this.solar.declination),n=t+Math.tan(v(e)),r=p(Math.atan(1/n));return this.hourAngle(r,!0)}}]),t}(),S={AqrabBalad:"AqrabBalad",AqrabYaum:"AqrabYaum",Unresolved:"Unresolved"},O=function(t){return!isNaN(t.sunrise)&&!isNaN(t.sunset)},D=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(r>Math.ceil(182.5))return null;var i=new Date(n.getTime());i.setDate(i.getDate()+a*r);var s=d(i,1),o=new T(i,e),h=new T(s,e);return O(o)&&O(h)?{date:n,tomorrow:s,coordinates:e,solarTime:o,tomorrowSolarTime:h}:t(e,n,r+(a>0?0:1),-a)},N=function t(e,r,a){var i=new T(r,n(n({},e),{},{latitude:a})),s=d(r,1),o=new T(s,n(n({},e),{},{latitude:a}));return O(i)&&O(o)?{date:r,tomorrow:s,coordinates:new u(a,e.longitude),solarTime:i,tomorrowSolarTime:o}:Math.abs(a)>=65?t(e,r,a-.5*Math.sign(a)):null},P=function(t,e,n){var r={date:e,tomorrow:d(e,1),coordinates:n,solarTime:new T(e,n),tomorrowSolarTime:new T(d(e,1),n)};switch(t){case S.AqrabYaum:return D(n,e)||r;case S.AqrabBalad:var a=n.latitude;return N(n,e,a-.5*Math.sign(a))||r;default:return r}},L=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;r(this,t),s(this,"madhab",o.Shafi),s(this,"highLatitudeRule",h.MiddleOfTheNight),s(this,"adjustments",{fajr:0,sunrise:0,dhuhr:0,asr:0,maghrib:0,isha:0}),s(this,"methodAdjustments",{fajr:0,sunrise:0,dhuhr:0,asr:0,maghrib:0,isha:0}),s(this,"polarCircleResolution",S.Unresolved),s(this,"rounding",l.Nearest),s(this,"shafaq",A.General),this.method=e,this.fajrAngle=n,this.ishaAngle=a,this.ishaInterval=i,this.maghribAngle=u,null===this.method&&(this.method="Other")}return i(t,[{key:"nightPortions",value:function(){switch(this.highLatitudeRule){case h.MiddleOfTheNight:return{fajr:.5,isha:.5};case h.SeventhOfTheNight:return{fajr:1/7,isha:1/7};case h.TwilightAngle:return{fajr:this.fajrAngle/60,isha:this.ishaAngle/60};default:throw"Invalid high latitude rule found when attempting to compute night portions: ".concat(this.highLatitudeRule)}}}]),t}(),C={MuslimWorldLeague:function(){var t=new L("MuslimWorldLeague",18,17);return t.methodAdjustments.dhuhr=1,t},Egyptian:function(){var t=new L("Egyptian",19.5,17.5);return t.methodAdjustments.dhuhr=1,t},Karachi:function(){var t=new L("Karachi",18,18);return t.methodAdjustments.dhuhr=1,t},UmmAlQura:function(){return new L("UmmAlQura",18.5,0,90)},Dubai:function(){var t=new L("Dubai",18.2,18.2);return t.methodAdjustments=n(n({},t.methodAdjustments),{},{sunrise:-3,dhuhr:3,asr:3,maghrib:3}),t},MoonsightingCommittee:function(){var t=new L("MoonsightingCommittee",18,18);return t.methodAdjustments=n(n({},t.methodAdjustments),{},{dhuhr:5,maghrib:3}),t},NorthAmerica:function(){var t=new L("NorthAmerica",15,15);return t.methodAdjustments.dhuhr=1,t},Kuwait:function(){return new L("Kuwait",18,17.5)},Qatar:function(){return new L("Qatar",18,0,90)},Singapore:function(){var t=new L("Singapore",20,18);return t.methodAdjustments.dhuhr=1,t.rounding=l.Up,t},Tehran:function(){return new L("Tehran",17.7,14,0,4.5)},Turkey:function(){var t=new L("Turkey",18,17);return t.methodAdjustments=n(n({},t.methodAdjustments),{},{sunrise:-7,dhuhr:5,asr:4,maghrib:7}),t},Other:function(){return new L("Other",0,0)}},Y={Fajr:"fajr",Sunrise:"sunrise",Dhuhr:"dhuhr",Asr:"asr",Maghrib:"maghrib",Isha:"isha",None:"none"},F=function(){function t(e){return r(this,t),this.hours=Math.floor(e),this.minutes=Math.floor(60*(e-this.hours)),this.seconds=Math.floor(60*(e-(this.hours+this.minutes/60))*60),this}return i(t,[{key:"utcDate",value:function(t,e,n){return new Date(Date.UTC(t,e,n,this.hours,this.minutes,this.seconds))}}]),t}(),q=function(){function t(e,n,a){r(this,t),this.coordinates=e,this.date=n,this.calculationParameters=a;var i,s,h,u,l,v,p,b=new T(n,e);h=new F(b.transit).utcDate(n.getFullYear(),n.getMonth(),n.getDate()),s=new F(b.sunrise).utcDate(n.getFullYear(),n.getMonth(),n.getDate()),l=new F(b.sunset).utcDate(n.getFullYear(),n.getMonth(),n.getDate());var w=d(n,1),A=new T(w,e),y=a.polarCircleResolution;if((!M(s)||!M(l)||isNaN(A.sunrise))&&y!==S.Unresolved){var O,D,N,L=P(y,n,e);b=L.solarTime,A=L.tomorrowSolarTime;var C=[n.getFullYear(),n.getMonth(),n.getDate()];h=(O=new F(b.transit)).utcDate.apply(O,C),s=(D=new F(b.sunrise)).utcDate.apply(D,C),l=(N=new F(b.sunset)).utcDate.apply(N,C)}u=new F(b.afternoon(function(t){switch(t){case o.Shafi:return 1;case o.Hanafi:return 2;default:throw"Invalid Madhab"}}(a.madhab))).utcDate(n.getFullYear(),n.getMonth(),n.getDate());var Y=new F(A.sunrise).utcDate(w.getFullYear(),w.getMonth(),w.getDate()),q=(Number(Y)-Number(l))/1e3;i=new F(b.hourAngle(-1*a.fajrAngle,!1)).utcDate(n.getFullYear(),n.getMonth(),n.getDate()),"MoonsightingCommittee"===a.method&&e.latitude>=55&&(i=g(s,-(q/7)));var x=function(){if("MoonsightingCommittee"===a.method)return j.seasonAdjustedMorningTwilight(e.latitude,m(n),n.getFullYear(),s);var t=a.nightPortions().fajr;return g(s,-(t*q))}();if((isNaN(i.getTime())||x>i)&&(i=x),a.ishaInterval>0)p=c(l,a.ishaInterval);else{p=new F(b.hourAngle(-1*a.ishaAngle,!0)).utcDate(n.getFullYear(),n.getMonth(),n.getDate()),"MoonsightingCommittee"===a.method&&e.latitude>=55&&(p=g(l,q/7));var I=function(){if("MoonsightingCommittee"===a.method)return j.seasonAdjustedEveningTwilight(e.latitude,m(n),n.getFullYear(),l,a.shafaq);var t=a.nightPortions().isha;return g(l,t*q)}();(isNaN(p.getTime())||I<p)&&(p=I)}if(v=l,a.maghribAngle){var E=new F(b.hourAngle(-1*a.maghribAngle,!0)).utcDate(n.getFullYear(),n.getMonth(),n.getDate());l<E&&p>E&&(v=E)}var k=(a.adjustments.fajr||0)+(a.methodAdjustments.fajr||0),U=(a.adjustments.sunrise||0)+(a.methodAdjustments.sunrise||0),H=(a.adjustments.dhuhr||0)+(a.methodAdjustments.dhuhr||0),R=(a.adjustments.asr||0)+(a.methodAdjustments.asr||0),B=(a.adjustments.maghrib||0)+(a.methodAdjustments.maghrib||0),Q=(a.adjustments.isha||0)+(a.methodAdjustments.isha||0);this.fajr=f(c(i,k),a.rounding),this.sunrise=f(c(s,U),a.rounding),this.dhuhr=f(c(h,H),a.rounding),this.asr=f(c(u,R),a.rounding),this.sunset=f(l,a.rounding),this.maghrib=f(c(v,B),a.rounding),this.isha=f(c(p,Q),a.rounding)}return i(t,[{key:"timeForPrayer",value:function(t){return t===Y.Fajr?this.fajr:t===Y.Sunrise?this.sunrise:t===Y.Dhuhr?this.dhuhr:t===Y.Asr?this.asr:t===Y.Maghrib?this.maghrib:t===Y.Isha?this.isha:null}},{key:"currentPrayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return t>=this.isha?Y.Isha:t>=this.maghrib?Y.Maghrib:t>=this.asr?Y.Asr:t>=this.dhuhr?Y.Dhuhr:t>=this.sunrise?Y.Sunrise:t>=this.fajr?Y.Fajr:Y.None}},{key:"nextPrayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return t>=this.isha?Y.None:t>=this.maghrib?Y.Isha:t>=this.asr?Y.Maghrib:t>=this.dhuhr?Y.Asr:t>=this.sunrise?Y.Dhuhr:t>=this.fajr?Y.Sunrise:Y.Fajr}}]),t}();var x=i((function t(e){r(this,t);var n=d(e.date,1),a=(new q(e.coordinates,n,e.calculationParameters).fajr.getTime()-e.maghrib.getTime())/1e3;this.middleOfTheNight=f(g(e.maghrib,a/2)),this.lastThirdOfTheNight=f(g(e.maghrib,a*(2/3)))}));t.CalculationMethod=C,t.CalculationParameters=L,t.Coordinates=u,t.HighLatitudeRule=h,t.Madhab=o,t.PolarCircleResolution=S,t.Prayer=Y,t.PrayerTimes=q,t.Qibla=function(t){var e=new u(21.4225241,39.8261818),n=Math.sin(v(e.longitude)-v(t.longitude)),r=Math.cos(v(t.latitude))*Math.tan(v(e.latitude)),a=Math.sin(v(t.latitude))*Math.cos(v(e.longitude)-v(t.longitude));return w(p(Math.atan2(n,r-a)))},t.Rounding=l,t.Shafaq=A,t.SunnahTimes=x,Object.defineProperty(t,"__esModule",{value:!0})}));